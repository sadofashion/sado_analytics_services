version: 2
models:
  - name: facebook_performance
    description: ""
    meta:
      joins:
        - join: calendar
          sql_on: ${facebook_performance.date_start} = ${calendar.date}
        - join: stg_gsheet__asms
          sql_on: ${facebook_performance.page} = ${stg_gsheet__asms.page}
        - join: stg_kiotviet__products
          sql_on: ${stg_kiotviet__products.ads_product_mapping} = ${facebook_performance.promoted_productline}
    columns:
      - name: account_name
        description: ""
        meta:
          dimension:
            type: string
      - name: date_start
        description: ""
        meta:
          dimension:
            type: date
            hidden: true
      - name: campaign_name
        description: campaign name based on convention
        meta:
          dimension:
            type: string
      - name: big_campaign
        description: ""
        meta:
          dimension:
            type: string
      - name: pic
        description: ""
        meta:
          dimension:
            type: string
      - name: content_group
        description: ""
        meta:
          dimension:
            type: string
      - name: page
        description: ""
        meta:
          dimension:
            type: string
      - name: promoted_productline
        description: ""
        meta:
          dimension:
            type: string
            sql: lower(promoted_productline)
      - name: media_type
        description: ""
        meta:
          dimension:
            type: string
      - name: campaign_id
        description: ""
        meta:
          metrics:
            m_num_camps:
              type: count_distinct
              label: No. Campaigns
              group_label: FB Ads
              filters:
                - impressions: ">=0"
          dimension:
            type: number
      - name: impressions
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_impressions:
              type: sum
              label: Impressions
              group_label: FB Ads
              compact: millions
              round: 1
            m_avg_impressions:
              type: average
              label: AVG Impressions
              group_label: FB Ads
              compact: millions
              round: 1
      - name: spend
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_spend:
              type: sum
              label: Spend
              group_label: FB Ads
              compact: millions
              round: 1
            m_avg_spend:
              type: average
              label: Avg Spend
              group_label: FB Ads
              compact: millions
              round: 1
      - name: clicks
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_clicks:
              type: sum
              label: Clicks
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: reach
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_reach:
              type: average
              label: Reach
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: link_click
        description: number of clicks to any urls in ads
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_link_click:
              type: sum
              label: Link Clicks
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: post_engagement
        description: number of engagement with ad post
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_post_engagement:
              type: sum
              label: Post engagement
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: offline_conversion_purchase
        description: number of offline purchases attributed to ads
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_ocv:
              type: sum
              label: Offine CV Purchase
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: offline_conversion_purchase_value
        description: offline purchase value attributed to ads
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_ocv_value:
              type: sum
              label: Offline CV Value
              group_label: FB Ads
              compact: millions
              round: 1
      - name: pixel_purchase
        description: website purchase attributed to ads
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_pcv:
              type: sum
              label: Online CV
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: pixel_purchase_value
        description: website purchase value attributed to ads
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_pcv_value:
              type: sum
              label: Online CV Value
              group_label: FB Ads
              compact: millions
              round: 1
      - name: meta_purchase
        description: number of purchase generated directly on facebook
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_meta_purchase:
              type: sum
              label: Message CV
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: meta_purchase_value
        description: purchase value generated directly on facebook
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_meta_purchase_value:
              type: sum
              label: Message CV Value
              group_label: FB Ads
              compact: millions
              round: 1
      - name: _results_message
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_messages:
              type: sum
              label: Messages
              group_label: FB Ads
              compact: thousands
              round: 1
      - name: ad_type
        description: ""
        meta:
          dimension:
            type: string
      - name: funnel
        description: ""
        meta:
          dimension:
            type: string
