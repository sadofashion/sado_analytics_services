version: 2
models:
  - name: facebook_budget
    description: ""
    meta:
      joins:
        - join: stg_gsheet__asms
          sql_on: ${stg_gsheet__asms.branch_id} = ${facebook_budget.branch_id}
        - join: calendar
          sql_on: ${calendar.date} = ${facebook_budget.date}
          fields:
            - date
            - period
            - year_month
            - month_name
            - no_days
            - period_code
    columns:
      - name: branch_id
        description: ""
        meta:
          dimension:
            type: number
          metrics:
            m_num_stores:
              type: count_distinct
              label: No. Stores
              group_label: Misc
      - name: page
        description: ""
        meta:
          dimension:
            type: string
      - name: branch
        description: ""
        meta:
          dimension:
            type: string
      - name: budget_month
        description: ""
        meta:
          dimension:
            type: date
            hidden: true
      - name: start
        description: ""
        meta:
          dimension:
            type: date
            hidden: true
      - name: milestone_name
        description: ""
        meta:
          dimension:
            type: string
      - name: total_budget
        description: ""
        meta:
          dimension:
            type: number
      - name: total_sales_target
        description: ""
        meta:
          dimension:
            type: number
      - name: total_traffic_target
        description: ""
        meta:
          dimension:
            type: number
      - name: end
        description: ""
        meta:
          dimension:
            type: date
            hidden: true
      - name: daily_budget
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_budget:
              type: sum
              label: Budget
              group_label: Budget
              compact: millions
              round: 1
            m_avg_budget:
              type: average
              label: _Budget
              group_label: Budget
              compact: millions
              round: 1
      - name: daily_sales_target
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_sales_target:
              type: sum
              label: Sales Target
              group_label: Budget
              compact: millions
              round: 1
            m_avg_sales_target:
              type: average
              label: _Sales Target
              group_label: Budget
              compact: millions
              round: 1
      - name: daily_traffic_target
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_traffic_target:
              type: sum
              label: Traffic Target
              group_label: Budget
              compact: thousands
              round: 1
            m_avg_traffic_target:
              type: average
              label: _Traffic Target
              group_label: Budget
              compact: millions
              round: 1
      - name: date
        description: ""
        meta:
          dimension:
            type: date
            hidden: true
