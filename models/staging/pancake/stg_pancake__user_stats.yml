version: 2
models:
  - name: stg_pancake__user_stats
    description: Thống kê dữ liệu nhân viên theo page theo giờ
    meta:
      joins:
        - join: calendar
          sql_on: ${calendar.date} = date(${stg_pancake__user_stats.hour})
          fields: [date,period, period_code]
        - join: stg_pancake__pages
          sql_on: ${stg_pancake__pages.page_id} = ${stg_pancake__user_stats.page_id}
          fields: [page_id, page_name]
        - join: stg_pancake__users
          sql_on: ${stg_pancake__users.user_id} = ${stg_pancake__user_stats.user_id}
          fields: [user_id, user_name]
    columns:
      - name: average_response_time
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_avg_response_time:
              type: average
              round: 2
              label: Avg response time
              group_label: Pancake metrics
      - name: comment_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_comment:
              type: sum
              round: 2
              label: No. comments
              group_label: Pancake metrics
              compact: thousands
      - name: hour
        description: ""
        meta:
          dimension:
            type: timestamp
            hidden: true
      - name: hour_in_integer
        description: ""
        meta:
          dimension:
            type: string
            hidden: true
      - name: inbox_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_inbox:
              type: sum
              round: 2
              label: No. inboxes
              group_label: Pancake metrics
              compact: thousands
      - name: order_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_order:
              type: sum
              round: 2
              label: No. orders
              group_label: Pancake metrics
              compact: thousands
      - name: phone_number_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_phone:
              type: sum
              round: 2
              label: No. phones
              group_label: Pancake metrics
              compact: thousands
      - name: private_reply_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_private_reply:
              type: sum
              round: 2
              label: No. private replies
              group_label: Pancake metrics
              compact: thousands
      - name: unique_comment_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_unique_comment:
              type: sum
              round: 2
              label: No. unique comments
              group_label: Pancake metrics
              compact: thousands
      - name: unique_inbox_count
        description: ""
        meta:
          dimension:
            type: number
            hidden: true
          metrics:
            m_num_unique inbox:
              type: sum
              round: 2
              label: No. unique inboxes
              group_label: Pancake metrics
              compact: thousands
      - name: page_id
        description: ""
        meta:
          dimension:
            type: string
            hidden: true
      - name: user_id
        description: ""
        meta:
          dimension:
            type: string
            hidden: true
